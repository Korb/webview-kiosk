---
title: Security
description: Authentication, launcher, lock task mode/pinning, device owner, DPC and managed configurations
---

import { APP_NAME } from '@/config/app';
import Link from 'fumadocs-core/link';

## 1. Settings Authentication Session

The settings page is locked using the device's biometrics or credentials (if set).

Once unlocked, it will not prompt for login for the next 5 minutes.
This persisting session duration reset each time a settings page is accessed.

When the device is locked, or the app is exited or placed in the background,
the authentication session will be revoked.

For more on Android App Pinning, visit the following resources:

1. [Google Official Documentation](https://support.google.com/android/answer/9455138)
1. [Samsung Guide for Unpin Lock](https://www.samsung.com/sg/support/mobile-devices/pin-an-app-to-your-phone-screen-so-that-it-cant-be-closed)

## 2. Default Launcher

By setting {APP_NAME} as the default launcher (home screen) app, any attempts to
leave the app will simply re-open it.

To do this, use the `Launcher` option in <Link href="/docs/setting-actions">Setting Actions</Link>.

## 3. App Pinning / Lock Task Mode

### 3.1. User-owned Devices

On regular user-owned devices, to improve security, enable **Ask for
PIN/pattern/password before unpinning** in your device settings.

On some devices, it may be shown as **Lock device when unpinning** or equivalent.

This setting is accessible by first finding **App Pinning**, then clicking
into the item (instead of the toggle/switch) to see additional options.

This will ensure that users cannot unpin (and thus unlock) the kiosk view without
the device first locking itself and requiring your biometrics or credentials.

### 3.2. Device Owner

When set as the device owner, {APP_NAME} automatically adds itself to the
[allowlist for lock task packages](https://developer.android.com/work/dpc/dedicated-devices/lock-task-mode).

This has the benefits of:

1. removing warnings and instructions when you "lock" the app (as it is no
   longer "screen pinning" like in user-owned devices) 
1. stopping users from triggering the "unpin" action using gestures or holding
   the back and overview button, thus removing the side-effect of the device
   getting locked when users attempt to "unpin"

In this mode, the only way to unlock {APP_NAME} would be using a methods
provided in-app, which are always configurable and can be disabled. The
supported methods are currently:

1. Opening the Kiosk Control Panel by tapping the screen 10 times in
   quick-succession (the default region is the top-left quadrant of
   your screen), then clicking `Unlock`
1. Adding a custom unlock shortcut (requires a physical keyboard or
   a method of that sending key combinations, e.g. `CTRL+1`)

You can set or remove {APP_NAME} as the device owner using Android Debug Bridge (ADB) on a PC.

```sh
# Set Webview Kiosk as Device Owner
adb shell dpm set-device-owner uk.nktnet.webviewkiosk/.WebviewKioskAdminReceiver

# Set Webview Kiosk as Device Owner
adb shell dpm remove-active-admin uk.nktnet.webviewkiosk/.WebviewKioskAdminReceiver
```

Alternatively, you can use [shizuku](https://github.com/RikkaApps/Shizuku) and
[termux](https://github.com/termux/termux-app) to obtain direct ADB access on
your android device (thus skipping the PC requirement).

Refer to
[GitHub Discussion #33](https://github.com/nktnet1/webview-kiosk/discussions/33#discussioncomment-14672999)
for a video demonstration.

### 3.3. Device Policy Controller

If you have control over your Device Policy Controller (DPC), or your MDM/EMM
has provided an interface to do so, you can simply add {APP_NAME} to the
allowlist of apps for lock task packages.

For example, using Google's sample Test DPC application available on the
[Play Store](https://play.google.com/store/apps/details?id=com.afwsamples.testdpc&hl=en_AU),
[GitHub](https://github.com/googlesamples/android-testdpc) and
[IzzyOnDroid](https://apt.izzysoft.de/fdroid/index/apk/com.afwsamples.testdpc).
Simply go to `Lock Task -> Manage lock task list` and enable {APP_NAME}.

Alternatively, if you are writing your own DPC, the kotlin code to achieve this would be:

```kt
val APP_PACKAGES = arrayOf(
  // Choose one depending on your installation method:
  "uk.nktnet.webviewkiosk",   // GitHub, F-Droid, IzzyOnDroid, etc
  "com.nktnet.webview_kiosk", // Aurora Store, Google Play Store
)

val dpm = context.getSystemService(Context.DEVICE_POLICY_SERVICE) as DevicePolicyManager
val adminName = getComponentName(context)
dpm.setLockTaskPackages(adminName, APP_PACKAGES)
```

For more information, see
[Android's official documentation](https://developer.android.com/work/dpc/dedicated-devices/lock-task-mode#allowlist_apps).

## 4. Managed App Configurations

For fully managed (company-owned) devices, you can use 
[managed configurations](https://developer.android.com/work/managed-configurations) 
to restrict and remotely modify {APP_NAME} settings through your MDM/EMM.

It is also possible to set app restrictions using the
[Test DPC](https://github.com/googlesamples/android-testdpc) application
mentioned previously.

For a list of available app restrictions, refer to
[./app/src/main/res/xml/app_restrictions.xml](https://github.com/nktnet1/webview-kiosk/blob/main/app/src/main/res/xml/app_restrictions.xml).

Below are instructions for a few popular MDM/EMM providers:

- [Google Endpoint Management](https://support.google.com/work/android/answer/6257696?hl=en)
- [Microsoft Intune](https://learn.microsoft.com/en-us/intune/intune-service/apps/app-configuration-policies-managed-app)
- [Miradore](https://www.miradore.com/knowledge/android/how-to-configure-application-settings)
- [Manage Engine](https://www.manageengine.com/mobile-device-management/managed-app-configuration.html)
- [Scale Fusion](https://help.scalefusion.com/v1/docs/application-configurations-for-android-applications)
- [Hexnode](https://www.hexnode.com/mobile-device-management/help/set-up-permissions-and-configurations-for-an-app-using-hexnode-mdm)

Managed configuration APIs can only be used by certified EMM providers. 
For example, [Headwind MDM does not support this feature](https://github.com/h-mdm/hmdm-server/issues/49#issuecomment-1151156032).
